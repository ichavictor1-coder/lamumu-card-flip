<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lamumu Memory Game</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(135deg, #ffefba, #ffffff);
      text-align: center;
      padding: 20px;
      margin: 0;
      transition: background 0.8s;
      overflow: hidden;
    }
    h1 {
      color: #333;
    }
    #gameBoard {
      display: grid;
      grid-template-columns: repeat(5, 100px);
      grid-gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    .card {
      width: 100px;
      height: 140px;
      border-radius: 12px;
      cursor: pointer;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s, opacity 0.6s;
    }
    .card.flipped {
      transform: rotateY(180deg);
    }
    .card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
    }
    .card-front, .card-back {
      width: 100%;
      height: 100%;
      position: absolute;
      backface-visibility: hidden;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card-front {
      background: #fff;
    }
    .card-front img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 12px;
    }
    .card-back {
      background: #fff;
      transform: rotateY(180deg);
    }
    .card-back img {
      width: 90%;
      height: 90%;
      object-fit: cover;
      border-radius: 10px;
    }
    /* Center + swing animation */
    @keyframes moveToCenter {
      0% { transform: scale(1) translate(0, 0); opacity: 1; }
      50% { transform: scale(1.2) translate(calc(50vw - 50%), calc(50vh - 50%)) rotate(10deg); }
      60% { transform: scale(1.2) translate(calc(50vw - 50%), calc(50vh - 50%)) rotate(-10deg); }
      70% { transform: scale(1.2) translate(calc(50vw - 50%), calc(50vh - 50%)) rotate(6deg); }
      100% { transform: scale(1.2) translate(calc(50vw - 50%), calc(50vh - 50%)); opacity: 0; }
    }
    .matched {
      animation: moveToCenter 1.5s ease forwards;
    }
    #message {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
      color: #2d2d2d;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #ff6666;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #ff4444;
    }
    /* Confetti style */
    .confetti {
      position: fixed;
      width: 8px;
      height: 8px;
      background: red;
      top: -10px;
      left: 50%;
      opacity: 0.8;
      animation: fall linear forwards;
    }
    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <h1>üêÑ Lamumu Memory Game</h1>
  <p>Flip the cards and match all the Lamumus!</p>
  
  <div id="gameBoard"></div>
  <p id="message"></p>
  <button onclick="startGame()">üîÑ Restart Game</button>

  <!-- üéµ Custom Audio (replace with your own) -->
  <audio id="matchSound" src="sounds/good-6081.mp3"></audio>
  <audio id="failSound" src="sounds/fail-234710.mp3"></audio>
  <audio id="bgMusic" src="sounds/Backing.mp3" loop></audio>

  <script>
    const gameBoard = document.getElementById("gameBoard");
    const message = document.getElementById("message");

    const matchSound = document.getElementById("matchSound");
    const failSound = document.getElementById("failSound");
    const bgMusic = document.getElementById("bgMusic");

    document.body.addEventListener("click", () => {
      if (bgMusic.paused) {
        bgMusic.volume = 0.4;
        bgMusic.play();
      }
    }, { once: true });

    // Replace with your Lamumu NFT image URLs
    const lamumuImages = [
      "/images/kungfu.jpeg",
      "/images/cute.jpeg",
      "/images/Angel.jpeg",
      "/images/samurai.jpeg",
      "/images/vortex.jpeg",
    ];

    let cards = [];
    let flippedCards = [];
    let matchedPairs = 0;

    function startGame() {
      gameBoard.innerHTML = "";
      message.textContent = "";
      flippedCards = [];
      matchedPairs = 0;

      // üåà Change background only at start
      document.body.style.background = getRandomBrightColor();

      cards = [...lamumuImages, ...lamumuImages];
      cards.sort(() => Math.random() - 0.5);

      cards.forEach((src) => {
        const card = document.createElement("div");
        card.classList.add("card");

        const cardInner = document.createElement("div");
        cardInner.classList.add("card-inner");

        const cardFront = document.createElement("div");
        cardFront.classList.add("card-front");
        const frontImg = document.createElement("img");
        frontImg.src = "/images/New cover.png"; 
        cardFront.appendChild(frontImg);

        const cardBack = document.createElement("div");
        cardBack.classList.add("card-back");
        const img = document.createElement("img");
        img.src = src;
        cardBack.appendChild(img);

        cardInner.appendChild(cardFront);
        cardInner.appendChild(cardBack);
        card.appendChild(cardInner);

        card.addEventListener("click", () => flipCard(card, src));
        gameBoard.appendChild(card);
      });
    }

    function flipCard(card, src) {
      if (flippedCards.length === 2 || card.classList.contains("flipped")) return;

      card.classList.add("flipped");
      flippedCards.push({ card, src });

      if (flippedCards.length === 2) {
        setTimeout(checkMatch, 800);
      }
    }

    function checkMatch() {
      const [first, second] = flippedCards;

      if (first.src === second.src) {
        first.card.classList.add("matched");
        second.card.classList.add("matched");

        matchSound.currentTime = 0;
        matchSound.play();

        matchedPairs++;
        if (matchedPairs === lamumuImages.length) {
          message.textContent = "üéâ You matched all Lamumus!";
          launchConfetti();
          setTimeout(startGame, 4000);
        }
      } else {
        failSound.currentTime = 0;
        failSound.play();
        first.card.classList.remove("flipped");
        second.card.classList.remove("flipped");
      }
      flippedCards = [];
    }

    // Confetti launcher
    function launchConfetti() {
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.background = getRandomBrightColor();
        confetti.style.animationDuration = (Math.random() * 3 + 2) + "s";
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 5000);
      }
    }

    function getRandomBrightColor() {
      const colors = ["#ff6666", "#66ff66", "#ffff66", "#ff66ff", "#ffa500", "#ff1493", "#ff4500", "#ffd700"];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    startGame();
  </script>
</body>
</html>
